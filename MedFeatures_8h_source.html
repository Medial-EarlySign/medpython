<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Medial Code Documentation: Internal/MedProcessTools/MedProcessTools/MedFeatures.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Medial Code Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_fe10b436a84a20bae4af599f57964cc6.html">Internal</a></li><li class="navelem"><a class="el" href="dir_c07d85429703d061294a3554c8940d12.html">MedProcessTools</a></li><li class="navelem"><a class="el" href="dir_25dba73f224c2ec572ce7c875d58b95a.html">MedProcessTools</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">MedFeatures.h</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// MedFeatures - holding data as a map from name to vector</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#ifndef __MED_FEATURES_H__</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#define __MED_FEATURES_H__</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &lt;InfraMed/InfraMed/InfraMed.h&gt;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;<a class="code" href="SerializableObject_8h.html">SerializableObject/SerializableObject/SerializableObject.h</a>&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;MedProcessTools/MedProcessTools/MedProcessUtils.h&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;MedProcessTools/MedProcessTools/MedSamples.h&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;MedMat/MedMat/MedMat.h&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;random&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">//.......................................................................................</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">//  A structure holding feature attributes</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">//.......................................................................................</span></div>
<div class="foldopen" id="foldopen00016" data-start="{" data-end="};">
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno"><a class="line" href="classFeatureAttr.html">   16</a></span><span class="keyword">class </span><a class="code hl_class" href="classFeatureAttr.html">FeatureAttr</a> : <span class="keyword">public</span> <a class="code hl_class" href="classSerializableObject.html">SerializableObject</a> {</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno"><a class="line" href="classFeatureAttr.html#ae3d2cfb9c0e31950d94f4a295d00a172">   18</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="classFeatureAttr.html#ae3d2cfb9c0e31950d94f4a295d00a172">normalized</a> = <span class="keyword">false</span>; </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno"><a class="line" href="classFeatureAttr.html#a4d8f8b9cf67b59150649f312e83bd79a">   19</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="classFeatureAttr.html#a4d8f8b9cf67b59150649f312e83bd79a">imputed</a> = <span class="keyword">false</span>; </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno"><a class="line" href="classFeatureAttr.html#ac7689ba69e197253e52c66f94b72f3b7">   20</a></span>    <span class="keywordtype">float</span> denorm_mean = 0.0, <a class="code hl_variable" href="classFeatureAttr.html#ac7689ba69e197253e52c66f94b72f3b7">denorm_sdv</a> = 1.0; </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno"><a class="line" href="classFeatureAttr.html#a2995a7713dd292228d07a9d42599cbaa">   22</a></span>    unordered_map&lt;float, string&gt; <a class="code hl_variable" href="classFeatureAttr.html#a2995a7713dd292228d07a9d42599cbaa">value2Name</a>; </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    <span class="comment">// Serialization</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    ADD_CLASS_NAME(<a class="code hl_class" href="classFeatureAttr.html">FeatureAttr</a>)</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    <a class="code hl_define" href="SerializableObject_8h.html#a152224225f53c73826c3ad5e3b08c4db">ADD_SERIALIZATION_FUNCS</a>(<a class="code hl_variable" href="classFeatureAttr.html#ae3d2cfb9c0e31950d94f4a295d00a172">normalized</a>, <a class="code hl_variable" href="classFeatureAttr.html#a4d8f8b9cf67b59150649f312e83bd79a">imputed</a> , denorm_mean, <a class="code hl_variable" href="classFeatureAttr.html#ac7689ba69e197253e52c66f94b72f3b7">denorm_sdv</a>, <a class="code hl_variable" href="classFeatureAttr.html#a2995a7713dd292228d07a9d42599cbaa">value2Name</a>)</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>};</div>
</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="comment">//.......................................................................................</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="comment">//.......................................................................................</span></div>
<div class="foldopen" id="foldopen00047" data-start="{" data-end="};">
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="classMedFeatures.html">   47</a></span><span class="keyword">class </span><a class="code hl_class" href="classMedFeatures.html">MedFeatures</a> final : <span class="keyword">public</span> <a class="code hl_class" href="classSerializableObject.html">SerializableObject</a> {</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="comment">// Data</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a05482b87b70426e9bc7d800043168af0">   51</a></span>    map&lt;string, vector&lt;float&gt; &gt; <a class="code hl_variable" href="classMedFeatures.html#a05482b87b70426e9bc7d800043168af0">data</a>; </div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a84ef79affff781a2bbee64e43b855aea">   52</a></span>    vector&lt;float&gt; <a class="code hl_variable" href="classMedFeatures.html#a84ef79affff781a2bbee64e43b855aea">weights</a>; </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a27be513e470935c46fe36884de1e4888">   53</a></span>    vector&lt;MedSample&gt; <a class="code hl_variable" href="classMedFeatures.html#a27be513e470935c46fe36884de1e4888">samples</a>; </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a0c60c47ba0160449e4f86aeba7760864">   57</a></span>    map&lt;int, pair&lt;int, int&gt;&gt; <a class="code hl_variable" href="classMedFeatures.html#a0c60c47ba0160449e4f86aeba7760864">pid_pos_len</a>;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <span class="comment">// Attributes</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a8514161e48e86e3e1014fbf1da84320d">   60</a></span>    map&lt;string, FeatureAttr&gt; <a class="code hl_variable" href="classMedFeatures.html#a8514161e48e86e3e1014fbf1da84320d">attributes</a>; </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a43fac72ba25bef77d9806a7fac0ce6a3">   61</a></span>    map&lt;string, unordered_set&lt;string&gt; &gt; <a class="code hl_variable" href="classMedFeatures.html#a43fac72ba25bef77d9806a7fac0ce6a3">tags</a>; </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="comment">// masks for cleaning , imputing</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cleaned_mask = (<span class="keywordtype">unsigned</span> char)0x01;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> imputed_mask = (<span class="keywordtype">unsigned</span> char)0x02;</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    map&lt;string, vector&lt;unsigned char&gt;&gt; masks;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="keywordtype">float</span> medf_missing_value = (float)MED_MAT_MISSING_VALUE;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="comment">// time Unit</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a9fa91061200f66f15721f1e551992227">   70</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="classMedFeatures.html#a9fa91061200f66f15721f1e551992227">time_unit</a>; </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="classMedFeatures.html#ac4576b555925eab79410ae32a97d8c12">   73</a></span>    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="classMedFeatures.html#ac4576b555925eab79410ae32a97d8c12">global_serial_id_cnt</a>;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="comment">// Functions</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a849481b92cd06990a972857529411f10">   78</a></span>    <a class="code hl_function" href="classMedFeatures.html#a849481b92cd06990a972857529411f10">MedFeatures</a>(<span class="keywordtype">int</span> _time_unit) { <a class="code hl_variable" href="classMedFeatures.html#a9fa91061200f66f15721f1e551992227">time_unit</a> = _time_unit; }</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>() { <a class="code hl_variable" href="classMedFeatures.html#a9fa91061200f66f15721f1e551992227">time_unit</a> = global_default_time_unit; <a class="code hl_variable" href="classMedFeatures.html#ac4576b555925eab79410ae32a97d8c12">global_serial_id_cnt</a> = 0; }</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="comment">// Initialization</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a1ca1a25aa4d28297547678a668e3634c">   84</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#a1ca1a25aa4d28297547678a668e3634c">clear</a>() { <a class="code hl_variable" href="classMedFeatures.html#a05482b87b70426e9bc7d800043168af0">data</a>.clear(); <a class="code hl_variable" href="classMedFeatures.html#a27be513e470935c46fe36884de1e4888">samples</a>.clear(); <a class="code hl_variable" href="classMedFeatures.html#a0c60c47ba0160449e4f86aeba7760864">pid_pos_len</a>.clear(); <a class="code hl_variable" href="classMedFeatures.html#a8514161e48e86e3e1014fbf1da84320d">attributes</a>.clear(); <a class="code hl_variable" href="classMedFeatures.html#a84ef79affff781a2bbee64e43b855aea">weights</a>.clear(); <a class="code hl_variable" href="classMedFeatures.html#a43fac72ba25bef77d9806a7fac0ce6a3">tags</a>.clear(); masks.clear(); }</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a72c0b1aedab81f2905c8a4e5e554fe3b">   86</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#a72c0b1aedab81f2905c8a4e5e554fe3b">set_time_unit</a>(<span class="keywordtype">int</span> _time_unit) { <a class="code hl_variable" href="classMedFeatures.html#a9fa91061200f66f15721f1e551992227">time_unit</a> = _time_unit; }</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#ac4708c31b4ead6d5cdfef27807cee508">get_feature_names</a>(vector&lt;string&gt;&amp; names) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#ac5c5b296858fea721af9bd8e624fe1aa">get_as_matrix</a>(<a class="code hl_class" href="classMedMat.html">MedMat&lt;float&gt;</a>&amp; mat) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#ac5c5b296858fea721af9bd8e624fe1aa">get_as_matrix</a>(<a class="code hl_class" href="classMedMat.html">MedMat&lt;float&gt;</a>&amp; mat, vector&lt;string&gt;&amp; names) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#ac5c5b296858fea721af9bd8e624fe1aa">get_as_matrix</a>(<a class="code hl_class" href="classMedMat.html">MedMat&lt;float&gt;</a>&amp; mat, <span class="keyword">const</span> vector&lt;string&gt;&amp; names, vector&lt;int&gt; &amp;idx) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#a16965efd7d9b7c3a2aeb6a019132879e">set_as_matrix</a>(<span class="keyword">const</span> <a class="code hl_class" href="classMedMat.html">MedMat&lt;float&gt;</a>&amp; mat);</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#a47894aede19064c0b7cf4e6adb5ff183">append_samples</a>(<a class="code hl_class" href="classMedIdSamples.html">MedIdSamples</a>&amp; in_samples);</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#a1113530cbcd3328f957bf92baf7e8e59">insert_samples</a>(<a class="code hl_class" href="classMedIdSamples.html">MedIdSamples</a>&amp; in_samples, <span class="keywordtype">int</span> index);</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a1691e01a5f0480f9ef949c45ba0d2081">  105</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#a1691e01a5f0480f9ef949c45ba0d2081">init_all_samples</a>(vector&lt;MedIdSamples&gt; &amp;in_samples) { <a class="code hl_variable" href="classMedFeatures.html#a27be513e470935c46fe36884de1e4888">samples</a>.clear(); <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <span class="keywordtype">id</span> : in_samples) <a class="code hl_function" href="classMedFeatures.html#a47894aede19064c0b7cf4e6adb5ff183">append_samples</a>(<span class="keywordtype">id</span>); <a class="code hl_function" href="classMedFeatures.html#a5a2d5210af0aa8a0faf7afe048961b4a">init_pid_pos_len</a>(); }</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#a5a2d5210af0aa8a0faf7afe048961b4a">init_pid_pos_len</a>();</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="classMedFeatures.html#a6f3962c1b79517c7ec038590ed025f4a">  109</a></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="classMedFeatures.html#a6f3962c1b79517c7ec038590ed025f4a">get_pid_pos</a>(<span class="keywordtype">int</span> pid)<span class="keyword"> const </span>{ <span class="keywordflow">if</span> (<a class="code hl_variable" href="classMedFeatures.html#a0c60c47ba0160449e4f86aeba7760864">pid_pos_len</a>.find(pid) == <a class="code hl_variable" href="classMedFeatures.html#a0c60c47ba0160449e4f86aeba7760864">pid_pos_len</a>.end()) <span class="keywordflow">return</span> -1; <span class="keywordflow">return</span> (<a class="code hl_variable" href="classMedFeatures.html#a0c60c47ba0160449e4f86aeba7760864">pid_pos_len</a>.at(pid).first); }</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno"><a class="line" href="classMedFeatures.html#ae2744f3b6eef70df4eb05301c6ddbe8d">  111</a></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="classMedFeatures.html#ae2744f3b6eef70df4eb05301c6ddbe8d">get_pid_len</a>(<span class="keywordtype">int</span> pid)<span class="keyword"> const </span>{ <span class="keywordflow">if</span> (<a class="code hl_variable" href="classMedFeatures.html#a0c60c47ba0160449e4f86aeba7760864">pid_pos_len</a>.find(pid) == <a class="code hl_variable" href="classMedFeatures.html#a0c60c47ba0160449e4f86aeba7760864">pid_pos_len</a>.end()) <span class="keywordflow">return</span> 0; <span class="keywordflow">return</span> (<a class="code hl_variable" href="classMedFeatures.html#a0c60c47ba0160449e4f86aeba7760864">pid_pos_len</a>.at(pid).second); }</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_function" href="classMedFeatures.html#ab4d2d38aeb139ebec79e9014b5721249">get_crc</a>();</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#a739a6c413d82856c3ae5a7171621686e">print_csv</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#a8184874eda3678fe2acf146f8b5919c5">get_samples</a>(<a class="code hl_class" href="classMedSamples.html">MedSamples</a>&amp; outSamples) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="classMedFeatures.html#a9ffe0dec24aa76b9caeb08c31f7e9655">get_max_serial_id_cnt</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="classMedFeatures.html#a21dfc20906bbf8ab7edf05600bffc886">write_as_csv_mat</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;csv_fname, <span class="keywordtype">bool</span> write_attributes = <span class="keyword">false</span>) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <span class="keywordtype">int</span> add_to_csv_mat(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;csv_fname, <span class="keywordtype">bool</span> write_attributes, <span class="keywordtype">int</span> start_idx) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="keywordtype">void</span> write_csv_data(ofstream&amp; out_f, <span class="keywordtype">bool</span> write_attributes, vector&lt;string&gt;&amp; col_names, <span class="keywordtype">int</span> start_idx) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="classMedFeatures.html#af70cb2e18b60288714d5ae46cd8aa4f3">read_from_csv_mat</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;csv_fname, <span class="keywordtype">bool</span> read_time_raw = <span class="keyword">true</span>);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="classMedFeatures.html#a5b7e816f990c17941af923c3220c78e9">filter</a>(unordered_set&lt;string&gt;&amp; selectedFeatures);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> </div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="classMedFeatures.html#a70f96726d1698ff8cab8f9e9f3bd9442">prep_selected_list</a>(vector&lt;string&gt;&amp; search_str, unordered_set&lt;string&gt; &amp;selected);</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="comment">// masks functions</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="keywordtype">int</span> init_masks();</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="keywordtype">int</span> get_masks_as_mat(<a class="code hl_class" href="classMedMat.html">MedMat&lt;unsigned char&gt;</a> &amp;masks_mat);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <span class="keywordtype">int</span> mark_imputed_in_masks(<span class="keywordtype">float</span> _missing_val);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keywordtype">int</span> mark_imputed_in_masks() { <span class="keywordflow">return</span> mark_imputed_in_masks(medf_missing_value); }</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="keywordtype">void</span> round_data(<span class="keywordtype">float</span> r);</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="keywordtype">void</span> noise_data(<span class="keywordtype">float</span> r);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMedFeatures.html#af6ecac2c1c594dcba839c1d863fb929f">samples_sort</a>();</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="keywordtype">string</span> <a class="code hl_function" href="classMedFeatures.html#acfe0a38f42877d0ebb71fac3d8a3c647">resolve_name</a>(<span class="keywordtype">string</span>&amp; substr) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="comment">// Serialization</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    ADD_CLASS_NAME(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>)</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <a class="code hl_define" href="SerializableObject_8h.html#a152224225f53c73826c3ad5e3b08c4db">ADD_SERIALIZATION_FUNCS</a>(<a class="code hl_variable" href="classMedFeatures.html#a05482b87b70426e9bc7d800043168af0">data</a>, <a class="code hl_variable" href="classMedFeatures.html#a84ef79affff781a2bbee64e43b855aea">weights</a>, <a class="code hl_variable" href="classMedFeatures.html#a27be513e470935c46fe36884de1e4888">samples</a>, <a class="code hl_variable" href="classMedFeatures.html#a8514161e48e86e3e1014fbf1da84320d">attributes</a>, <a class="code hl_variable" href="classMedFeatures.html#a43fac72ba25bef77d9806a7fac0ce6a3">tags</a>, <a class="code hl_variable" href="classMedFeatures.html#a9fa91061200f66f15721f1e551992227">time_unit</a>)</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>};</div>
</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span><a class="code hl_define" href="SerializableObject_8h.html#a36e8feaba0b8cd9fbcd13b03911524fc">MEDSERIALIZE_SUPPORT</a>(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>)</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span><a class="code hl_define" href="SerializableObject_8h.html#a36e8feaba0b8cd9fbcd13b03911524fc">MEDSERIALIZE_SUPPORT</a>(<a class="code hl_class" href="classFeatureAttr.html">FeatureAttr</a>)</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacemedial.html">medial</a> {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="keyword">namespace </span><a class="code hl_function" href="namespacelint.html#aa13019ae7f4533ba76f58747f52f7b23">process</a> {</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#a47edc48a239b44b3216214338ed2ff18">commit_selection</a>(vector&lt;T&gt; &amp;vec, <span class="keyword">const</span> vector&lt;int&gt; &amp;idx);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#a3fd09c7e050038ffc39b1eed932afe55">filter_row_indexes</a>(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a> &amp;dataMat, vector&lt;int&gt; &amp;selected_indexes, <span class="keywordtype">bool</span> op_flag = <span class="keyword">false</span>);</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#ab30b0de1adfb8fa802f854a3ba37fb3a">filter_row_indexes_safe</a>(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a> &amp;dataMat, <span class="keyword">const</span> vector&lt;int&gt; &amp;selected_indexes, <span class="keywordtype">bool</span> op_flag = <span class="keyword">false</span>);</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#a7489521743c40b6b1520e77db445cb18">down_sample</a>(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a> &amp;dataMat, <span class="keywordtype">double</span> take_ratio, <span class="keywordtype">bool</span> with_repeats = <span class="keyword">false</span>,</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>            vector&lt;int&gt; *selected_indexes = NULL);</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        <span class="keywordtype">double</span> <a class="code hl_function" href="namespacemedial_1_1process.html#ae8cbb242d14958e377644ad1c97dc341">reweight_by_general</a>(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a> &amp;data_records, <span class="keyword">const</span> vector&lt;string&gt; &amp;groups,</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>            vector&lt;float&gt; &amp;weigths, <span class="keywordtype">bool</span> print_verbose);</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#a21f2c9ee92dda4c19403bf294a2559e3">match_by_general</a>(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a> &amp;data_records, <span class="keyword">const</span> vector&lt;string&gt; &amp;groups,</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>            vector&lt;int&gt; &amp;filtered_row_ids, <span class="keywordtype">float</span> price_ratio, <span class="keywordtype">int</span> min_grp_size, <span class="keywordtype">bool</span> print_verbose);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#a21f2c9ee92dda4c19403bf294a2559e3">match_by_general</a>(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a> &amp;data_records, <span class="keyword">const</span> vector&lt;string&gt; &amp;groups,</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>            vector&lt;int&gt; &amp;filtered_row_ids, <span class="keywordtype">float</span> price_ratio, <span class="keywordtype">float</span> max_ratio, <span class="keywordtype">int</span> min_grp_size, <span class="keywordtype">bool</span> print_verbose);</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#ac0c3a29c06944b0a5502f3dd0198b787">split_matrix</a>(<span class="keyword">const</span> <a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>&amp; matrix, vector&lt;int&gt;&amp; folds, <span class="keywordtype">int</span> iFold,</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>            <a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>&amp; trainMatrix, <a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>&amp; testMatrix, <span class="keyword">const</span> vector&lt;string&gt; *selected_features = NULL);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#ac0c3a29c06944b0a5502f3dd0198b787">split_matrix</a>(<span class="keyword">const</span> <a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>&amp; matrix, unordered_map&lt;int, int&gt;&amp; folds, <span class="keywordtype">int</span> iFold,</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>            <a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>&amp; trainMatrix, <a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>&amp; testMatrix, <span class="keyword">const</span> vector&lt;string&gt; *selected_features = NULL);</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#a9f70ddf1f79f09e836578683cddfd9c2">convert_prctile</a>(vector&lt;float&gt; &amp;features_prctiles);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#ae514b7fd10f7277af01c0236faa387a7">match_to_prior</a>(<span class="keyword">const</span> vector&lt;float&gt; &amp;outcome,</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>            <span class="keyword">const</span> vector&lt;float&gt; &amp;group_values, <span class="keywordtype">float</span> target_prior, vector&lt;int&gt; &amp;sel_idx);</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        <span class="keywordtype">double</span> <a class="code hl_function" href="namespacemedial_1_1process.html#ae514b7fd10f7277af01c0236faa387a7">match_to_prior</a>(<a class="code hl_class" href="classMedSamples.html">MedSamples</a> &amp;samples, <span class="keywordtype">float</span> target_prior, vector&lt;int&gt; &amp;sel_idx);</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        <span class="keywordtype">double</span> <a class="code hl_function" href="namespacemedial_1_1process.html#ae514b7fd10f7277af01c0236faa387a7">match_to_prior</a>(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a> &amp;features, <span class="keywordtype">float</span> target_prior, vector&lt;int&gt; &amp;sel_idx);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="namespacemedial_1_1process.html#ae514b7fd10f7277af01c0236faa387a7">match_to_prior</a>(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a> &amp;features,</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>            <span class="keyword">const</span> vector&lt;string&gt; &amp;group_values, <span class="keywordtype">float</span> target_prior, vector&lt;int&gt; &amp;sel_idx, <span class="keywordtype">bool</span> print_verbose = <span class="keyword">true</span>);</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        <span class="keywordtype">int</span> <a class="code hl_function" href="namespacemedial_1_1process.html#a696722371418ef97d7cf1e02760f3256">nSplits</a>(vector&lt;MedSample&gt;&amp; samples);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        <span class="keywordtype">float</span> <a class="code hl_function" href="namespacemedial_1_1process.html#a6f9f2fd98b6c6d8c4d312c0b654487f1">match_multi_class</a>(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>&amp; data, <span class="keyword">const</span> vector&lt;string&gt; &amp;groups, vector&lt;int&gt; &amp;filtered_row_ids, vector&lt;float&gt;&amp; price_ratios, <span class="keywordtype">int</span> nRand = 10000, <span class="keywordtype">int</span> verbose = <span class="keyword">false</span>);</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        <span class="keywordtype">float</span> <a class="code hl_function" href="namespacemedial_1_1process.html#a6f9f2fd98b6c6d8c4d312c0b654487f1">match_multi_class</a>(vector&lt;MedSample&gt;&amp; data, <span class="keyword">const</span> vector&lt;string&gt; &amp;groups, vector&lt;int&gt; &amp;filtered_row_ids, vector&lt;float&gt;&amp; price_ratios, <span class="keywordtype">int</span> nRand = 10000, <span class="keywordtype">int</span> verbose = <span class="keyword">false</span>);</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span> </div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>        <span class="keywordtype">void</span> match_multi_class_to_dist(<a class="code hl_class" href="classMedFeatures.html">MedFeatures</a>&amp; data, <span class="keyword">const</span> vector&lt;string&gt; &amp;groups, vector&lt;int&gt; &amp;filtered_row_ids, vector&lt;float&gt; probs);</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        <span class="keywordtype">void</span> match_multi_class_to_dist(vector&lt;MedSample&gt;&amp; data, <span class="keyword">const</span> vector&lt;string&gt; &amp;groups, vector&lt;int&gt; &amp;filtered_row_ids, vector&lt;float&gt; probs);</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span> </div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    }</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>}</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="aSerializableObject_8h_html"><div class="ttname"><a href="SerializableObject_8h.html">SerializableObject.h</a></div><div class="ttdoc">An Abstract class that can be serialized and written/read from file.</div></div>
<div class="ttc" id="aSerializableObject_8h_html_a152224225f53c73826c3ad5e3b08c4db"><div class="ttname"><a href="SerializableObject_8h.html#a152224225f53c73826c3ad5e3b08c4db">ADD_SERIALIZATION_FUNCS</a></div><div class="ttdeci">#define ADD_SERIALIZATION_FUNCS(...)</div><div class="ttdef"><b>Definition</b> SerializableObject.h:122</div></div>
<div class="ttc" id="aSerializableObject_8h_html_a36e8feaba0b8cd9fbcd13b03911524fc"><div class="ttname"><a href="SerializableObject_8h.html#a36e8feaba0b8cd9fbcd13b03911524fc">MEDSERIALIZE_SUPPORT</a></div><div class="ttdeci">#define MEDSERIALIZE_SUPPORT(Type)</div><div class="ttdef"><b>Definition</b> SerializableObject.h:108</div></div>
<div class="ttc" id="aclassFeatureAttr_html"><div class="ttname"><a href="classFeatureAttr.html">FeatureAttr</a></div><div class="ttdef"><b>Definition</b> MedFeatures.h:16</div></div>
<div class="ttc" id="aclassFeatureAttr_html_a2995a7713dd292228d07a9d42599cbaa"><div class="ttname"><a href="classFeatureAttr.html#a2995a7713dd292228d07a9d42599cbaa">FeatureAttr::value2Name</a></div><div class="ttdeci">unordered_map&lt; float, string &gt; value2Name</div><div class="ttdoc">map value to name (e.g. for naming one-hot feature processor)</div><div class="ttdef"><b>Definition</b> MedFeatures.h:22</div></div>
<div class="ttc" id="aclassFeatureAttr_html_a4d8f8b9cf67b59150649f312e83bd79a"><div class="ttname"><a href="classFeatureAttr.html#a4d8f8b9cf67b59150649f312e83bd79a">FeatureAttr::imputed</a></div><div class="ttdeci">bool imputed</div><div class="ttdoc">indicator that the feature has been imputed and does not contain missing values</div><div class="ttdef"><b>Definition</b> MedFeatures.h:19</div></div>
<div class="ttc" id="aclassFeatureAttr_html_ac7689ba69e197253e52c66f94b72f3b7"><div class="ttname"><a href="classFeatureAttr.html#ac7689ba69e197253e52c66f94b72f3b7">FeatureAttr::denorm_sdv</a></div><div class="ttdeci">float denorm_sdv</div><div class="ttdoc">Mean and Standard deviation for de-normalization.</div><div class="ttdef"><b>Definition</b> MedFeatures.h:20</div></div>
<div class="ttc" id="aclassFeatureAttr_html_ae3d2cfb9c0e31950d94f4a295d00a172"><div class="ttname"><a href="classFeatureAttr.html#ae3d2cfb9c0e31950d94f4a295d00a172">FeatureAttr::normalized</a></div><div class="ttdeci">bool normalized</div><div class="ttdoc">indicator that the feature has been normalized</div><div class="ttdef"><b>Definition</b> MedFeatures.h:18</div></div>
<div class="ttc" id="aclassMedFeatures_html"><div class="ttname"><a href="classMedFeatures.html">MedFeatures</a></div><div class="ttdoc">A class for holding features data as a virtual matrix</div><div class="ttdef"><b>Definition</b> MedFeatures.h:47</div></div>
<div class="ttc" id="aclassMedFeatures_html_a05482b87b70426e9bc7d800043168af0"><div class="ttname"><a href="classMedFeatures.html#a05482b87b70426e9bc7d800043168af0">MedFeatures::data</a></div><div class="ttdeci">map&lt; string, vector&lt; float &gt; &gt; data</div><div class="ttdoc">the actual matrix of values per sample</div><div class="ttdef"><b>Definition</b> MedFeatures.h:51</div></div>
<div class="ttc" id="aclassMedFeatures_html_a0c60c47ba0160449e4f86aeba7760864"><div class="ttname"><a href="classMedFeatures.html#a0c60c47ba0160449e4f86aeba7760864">MedFeatures::pid_pos_len</a></div><div class="ttdeci">map&lt; int, pair&lt; int, int &gt; &gt; pid_pos_len</div><div class="ttdoc">feature generation assumes that all &quot;rows&quot; for a specific pid are adjacent.</div><div class="ttdef"><b>Definition</b> MedFeatures.h:57</div></div>
<div class="ttc" id="aclassMedFeatures_html_a1113530cbcd3328f957bf92baf7e8e59"><div class="ttname"><a href="classMedFeatures.html#a1113530cbcd3328f957bf92baf7e8e59">MedFeatures::insert_samples</a></div><div class="ttdeci">void insert_samples(MedIdSamples &amp;in_samples, int index)</div><div class="ttdoc">Insert samples at position idex, assuming samples vector is properly allocated (used for generating s...</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:267</div></div>
<div class="ttc" id="aclassMedFeatures_html_a1691e01a5f0480f9ef949c45ba0d2081"><div class="ttname"><a href="classMedFeatures.html#a1691e01a5f0480f9ef949c45ba0d2081">MedFeatures::init_all_samples</a></div><div class="ttdeci">void init_all_samples(vector&lt; MedIdSamples &gt; &amp;in_samples)</div><div class="ttdoc">Fill samples vetor and initialize pid_pos_len according to input vector of MedIdSamples.</div><div class="ttdef"><b>Definition</b> MedFeatures.h:105</div></div>
<div class="ttc" id="aclassMedFeatures_html_a16965efd7d9b7c3a2aeb6a019132879e"><div class="ttname"><a href="classMedFeatures.html#a16965efd7d9b7c3a2aeb6a019132879e">MedFeatures::set_as_matrix</a></div><div class="ttdeci">void set_as_matrix(const MedMat&lt; float &gt; &amp;mat)</div><div class="ttdoc">Set data (+attributes) from MedMat.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:226</div></div>
<div class="ttc" id="aclassMedFeatures_html_a1ca1a25aa4d28297547678a668e3634c"><div class="ttname"><a href="classMedFeatures.html#a1ca1a25aa4d28297547678a668e3634c">MedFeatures::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Clear all vectors.</div><div class="ttdef"><b>Definition</b> MedFeatures.h:84</div></div>
<div class="ttc" id="aclassMedFeatures_html_a21dfc20906bbf8ab7edf05600bffc886"><div class="ttname"><a href="classMedFeatures.html#a21dfc20906bbf8ab7edf05600bffc886">MedFeatures::write_as_csv_mat</a></div><div class="ttdeci">int write_as_csv_mat(const string &amp;csv_fname, bool write_attributes=false) const</div><div class="ttdoc">Write features (samples + weights + data) as csv with a header line.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:361</div></div>
<div class="ttc" id="aclassMedFeatures_html_a27be513e470935c46fe36884de1e4888"><div class="ttname"><a href="classMedFeatures.html#a27be513e470935c46fe36884de1e4888">MedFeatures::samples</a></div><div class="ttdeci">vector&lt; MedSample &gt; samples</div><div class="ttdoc">The samples representing the lines.</div><div class="ttdef"><b>Definition</b> MedFeatures.h:53</div></div>
<div class="ttc" id="aclassMedFeatures_html_a43fac72ba25bef77d9806a7fac0ce6a3"><div class="ttname"><a href="classMedFeatures.html#a43fac72ba25bef77d9806a7fac0ce6a3">MedFeatures::tags</a></div><div class="ttdeci">map&lt; string, unordered_set&lt; string &gt; &gt; tags</div><div class="ttdoc">a set of tags per feature</div><div class="ttdef"><b>Definition</b> MedFeatures.h:61</div></div>
<div class="ttc" id="aclassMedFeatures_html_a47894aede19064c0b7cf4e6adb5ff183"><div class="ttname"><a href="classMedFeatures.html#a47894aede19064c0b7cf4e6adb5ff183">MedFeatures::append_samples</a></div><div class="ttdeci">void append_samples(MedIdSamples &amp;in_samples)</div><div class="ttdoc">Append samples at end of samples vector (used for generating samples set before generating features)</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:261</div></div>
<div class="ttc" id="aclassMedFeatures_html_a5a2d5210af0aa8a0faf7afe048961b4a"><div class="ttname"><a href="classMedFeatures.html#a5a2d5210af0aa8a0faf7afe048961b4a">MedFeatures::init_pid_pos_len</a></div><div class="ttdeci">void init_pid_pos_len()</div><div class="ttdoc">initialize pid_pos_len vector according to samples</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:275</div></div>
<div class="ttc" id="aclassMedFeatures_html_a5b7e816f990c17941af923c3220c78e9"><div class="ttname"><a href="classMedFeatures.html#a5b7e816f990c17941af923c3220c78e9">MedFeatures::filter</a></div><div class="ttdeci">int filter(unordered_set&lt; string &gt; &amp;selectedFeatures)</div><div class="ttdoc">Filter data (and attributes) to include only selected features.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:716</div></div>
<div class="ttc" id="aclassMedFeatures_html_a6f3962c1b79517c7ec038590ed025f4a"><div class="ttname"><a href="classMedFeatures.html#a6f3962c1b79517c7ec038590ed025f4a">MedFeatures::get_pid_pos</a></div><div class="ttdeci">int get_pid_pos(int pid) const</div><div class="ttdoc">Return the first row in the virtual matrix for an id (-1 if none)</div><div class="ttdef"><b>Definition</b> MedFeatures.h:109</div></div>
<div class="ttc" id="aclassMedFeatures_html_a70f96726d1698ff8cab8f9e9f3bd9442"><div class="ttname"><a href="classMedFeatures.html#a70f96726d1698ff8cab8f9e9f3bd9442">MedFeatures::prep_selected_list</a></div><div class="ttdeci">int prep_selected_list(vector&lt; string &gt; &amp;search_str, unordered_set&lt; string &gt; &amp;selected)</div><div class="ttdoc">preparing a list all features that contain as a substring one of the given search strings,...</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:783</div></div>
<div class="ttc" id="aclassMedFeatures_html_a72c0b1aedab81f2905c8a4e5e554fe3b"><div class="ttname"><a href="classMedFeatures.html#a72c0b1aedab81f2905c8a4e5e554fe3b">MedFeatures::set_time_unit</a></div><div class="ttdeci">void set_time_unit(int _time_unit)</div><div class="ttdoc">set time unit</div><div class="ttdef"><b>Definition</b> MedFeatures.h:86</div></div>
<div class="ttc" id="aclassMedFeatures_html_a739a6c413d82856c3ae5a7171621686e"><div class="ttname"><a href="classMedFeatures.html#a739a6c413d82856c3ae5a7171621686e">MedFeatures::print_csv</a></div><div class="ttdeci">void print_csv() const</div><div class="ttdoc">MLOG data in csv format.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:325</div></div>
<div class="ttc" id="aclassMedFeatures_html_a8184874eda3678fe2acf146f8b5919c5"><div class="ttname"><a href="classMedFeatures.html#a8184874eda3678fe2acf146f8b5919c5">MedFeatures::get_samples</a></div><div class="ttdeci">void get_samples(MedSamples &amp;outSamples) const</div><div class="ttdoc">Get the corresponding MedSamples object . Assuming samples vector in features are ordered (all id's s...</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:749</div></div>
<div class="ttc" id="aclassMedFeatures_html_a849481b92cd06990a972857529411f10"><div class="ttname"><a href="classMedFeatures.html#a849481b92cd06990a972857529411f10">MedFeatures::MedFeatures</a></div><div class="ttdeci">MedFeatures(int _time_unit)</div><div class="ttdoc">Constructor Given time-unit.</div><div class="ttdef"><b>Definition</b> MedFeatures.h:78</div></div>
<div class="ttc" id="aclassMedFeatures_html_a84ef79affff781a2bbee64e43b855aea"><div class="ttname"><a href="classMedFeatures.html#a84ef79affff781a2bbee64e43b855aea">MedFeatures::weights</a></div><div class="ttdeci">vector&lt; float &gt; weights</div><div class="ttdoc">a vector of weight per sample</div><div class="ttdef"><b>Definition</b> MedFeatures.h:52</div></div>
<div class="ttc" id="aclassMedFeatures_html_a8514161e48e86e3e1014fbf1da84320d"><div class="ttname"><a href="classMedFeatures.html#a8514161e48e86e3e1014fbf1da84320d">MedFeatures::attributes</a></div><div class="ttdeci">map&lt; string, FeatureAttr &gt; attributes</div><div class="ttdoc">a FeatureAttr per feature</div><div class="ttdef"><b>Definition</b> MedFeatures.h:60</div></div>
<div class="ttc" id="aclassMedFeatures_html_a9fa91061200f66f15721f1e551992227"><div class="ttname"><a href="classMedFeatures.html#a9fa91061200f66f15721f1e551992227">MedFeatures::time_unit</a></div><div class="ttdeci">int time_unit</div><div class="ttdoc">the time unit of the samples</div><div class="ttdef"><b>Definition</b> MedFeatures.h:70</div></div>
<div class="ttc" id="aclassMedFeatures_html_a9ffe0dec24aa76b9caeb08c31f7e9655"><div class="ttname"><a href="classMedFeatures.html#a9ffe0dec24aa76b9caeb08c31f7e9655">MedFeatures::get_max_serial_id_cnt</a></div><div class="ttdeci">int get_max_serial_id_cnt() const</div><div class="ttdoc">Return the max serial_id_cnt.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:767</div></div>
<div class="ttc" id="aclassMedFeatures_html_ab4d2d38aeb139ebec79e9014b5721249"><div class="ttname"><a href="classMedFeatures.html#ab4d2d38aeb139ebec79e9014b5721249">MedFeatures::get_crc</a></div><div class="ttdeci">unsigned int get_crc()</div><div class="ttdoc">Calculate a crc for the data (used for debugging mainly)</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:299</div></div>
<div class="ttc" id="aclassMedFeatures_html_ac4576b555925eab79410ae32a97d8c12"><div class="ttname"><a href="classMedFeatures.html#ac4576b555925eab79410ae32a97d8c12">MedFeatures::global_serial_id_cnt</a></div><div class="ttdeci">static int global_serial_id_cnt</div><div class="ttdoc">A global counter used to prevent identical names for two features by adding FTR_::_ before generated ...</div><div class="ttdef"><b>Definition</b> MedFeatures.h:73</div></div>
<div class="ttc" id="aclassMedFeatures_html_ac4708c31b4ead6d5cdfef27807cee508"><div class="ttname"><a href="classMedFeatures.html#ac4708c31b4ead6d5cdfef27807cee508">MedFeatures::get_feature_names</a></div><div class="ttdeci">void get_feature_names(vector&lt; string &gt; &amp;names) const</div><div class="ttdoc">Get a vector of feature names.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:52</div></div>
<div class="ttc" id="aclassMedFeatures_html_ac5c5b296858fea721af9bd8e624fe1aa"><div class="ttname"><a href="classMedFeatures.html#ac5c5b296858fea721af9bd8e624fe1aa">MedFeatures::get_as_matrix</a></div><div class="ttdeci">void get_as_matrix(MedMat&lt; float &gt; &amp;mat) const</div><div class="ttdoc">Get data (+attributes) as a MedMat.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:63</div></div>
<div class="ttc" id="aclassMedFeatures_html_acfe0a38f42877d0ebb71fac3d8a3c647"><div class="ttname"><a href="classMedFeatures.html#acfe0a38f42877d0ebb71fac3d8a3c647">MedFeatures::resolve_name</a></div><div class="ttdeci">string resolve_name(string &amp;substr) const</div><div class="ttdoc">Get feature name that matches a substring.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:2191</div></div>
<div class="ttc" id="aclassMedFeatures_html_ae2744f3b6eef70df4eb05301c6ddbe8d"><div class="ttname"><a href="classMedFeatures.html#ae2744f3b6eef70df4eb05301c6ddbe8d">MedFeatures::get_pid_len</a></div><div class="ttdeci">int get_pid_len(int pid) const</div><div class="ttdoc">Return the number of rows in the virtual matrix for an id (-1 if none)</div><div class="ttdef"><b>Definition</b> MedFeatures.h:111</div></div>
<div class="ttc" id="aclassMedFeatures_html_af6ecac2c1c594dcba839c1d863fb929f"><div class="ttname"><a href="classMedFeatures.html#af6ecac2c1c594dcba839c1d863fb929f">MedFeatures::samples_sort</a></div><div class="ttdeci">void samples_sort()</div><div class="ttdoc">Sort by id and time.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:2152</div></div>
<div class="ttc" id="aclassMedFeatures_html_af70cb2e18b60288714d5ae46cd8aa4f3"><div class="ttname"><a href="classMedFeatures.html#af70cb2e18b60288714d5ae46cd8aa4f3">MedFeatures::read_from_csv_mat</a></div><div class="ttdeci">int read_from_csv_mat(const string &amp;csv_fname, bool read_time_raw=true)</div><div class="ttdoc">Read features (samples + weights + data) from a csv file with a header line.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:509</div></div>
<div class="ttc" id="aclassMedIdSamples_html"><div class="ttname"><a href="classMedIdSamples.html">MedIdSamples</a></div><div class="ttdoc">MedIdSamples represent a collection of samples of a given id   Additional (optinal) entries: split</div><div class="ttdef"><b>Definition</b> MedSamples.h:90</div></div>
<div class="ttc" id="aclassMedMat_html"><div class="ttname"><a href="classMedMat.html">MedMat</a></div><div class="ttdef"><b>Definition</b> MedMat.h:63</div></div>
<div class="ttc" id="aclassMedSamples_html"><div class="ttname"><a href="classMedSamples.html">MedSamples</a></div><div class="ttdoc">MedSamples represent a collection of samples per different id   The data is conatined in a vector of ...</div><div class="ttdef"><b>Definition</b> MedSamples.h:129</div></div>
<div class="ttc" id="aclassSerializableObject_html"><div class="ttname"><a href="classSerializableObject.html">SerializableObject</a></div><div class="ttdef"><b>Definition</b> SerializableObject.h:32</div></div>
<div class="ttc" id="anamespacelint_html_aa13019ae7f4533ba76f58747f52f7b23"><div class="ttname"><a href="namespacelint.html#aa13019ae7f4533ba76f58747f52f7b23">lint.process</a></div><div class="ttdeci">process(fname, allow_type)</div><div class="ttdef"><b>Definition</b> lint.py:152</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_a21f2c9ee92dda4c19403bf294a2559e3"><div class="ttname"><a href="namespacemedial_1_1process.html#a21f2c9ee92dda4c19403bf294a2559e3">medial::process::match_by_general</a></div><div class="ttdeci">void match_by_general(MedFeatures &amp;data_records, const vector&lt; string &gt; &amp;groups, vector&lt; int &gt; &amp;filtered_row_ids, float price_ratio, int min_grp_size, bool print_verbose)</div><div class="ttdoc">matching by given groups uniq values. returns also the row_ids filtered</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:1083</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_a3fd09c7e050038ffc39b1eed932afe55"><div class="ttname"><a href="namespacemedial_1_1process.html#a3fd09c7e050038ffc39b1eed932afe55">medial::process::filter_row_indexes</a></div><div class="ttdeci">void filter_row_indexes(MedFeatures &amp;dataMat, vector&lt; int &gt; &amp;selected_indexes, bool op_flag=false)</div><div class="ttdoc">filtering MedFeatures by selected indexes rows</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:880</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_a47edc48a239b44b3216214338ed2ff18"><div class="ttname"><a href="namespacemedial_1_1process.html#a47edc48a239b44b3216214338ed2ff18">medial::process::commit_selection</a></div><div class="ttdeci">void commit_selection(vector&lt; T &gt; &amp;vec, const vector&lt; int &gt; &amp;idx)</div><div class="ttdoc">commit selection of indexes on vector</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:794</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_a696722371418ef97d7cf1e02760f3256"><div class="ttname"><a href="namespacemedial_1_1process.html#a696722371418ef97d7cf1e02760f3256">medial::process::nSplits</a></div><div class="ttdeci">int nSplits(vector&lt; MedSample &gt; &amp;samples)</div><div class="ttdoc">Return number of splits, also check mismatches between idSample and internal MedSamples and set idSam...</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:2006</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_a6f9f2fd98b6c6d8c4d312c0b654487f1"><div class="ttname"><a href="namespacemedial_1_1process.html#a6f9f2fd98b6c6d8c4d312c0b654487f1">medial::process::match_multi_class</a></div><div class="ttdeci">float match_multi_class(MedFeatures &amp;data, const vector&lt; string &gt; &amp;groups, vector&lt; int &gt; &amp;filtered_row_ids, vector&lt; float &gt; &amp;price_ratios, int nRand=10000, int verbose=false)</div><div class="ttdoc">multi-class matching.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:1684</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_a7489521743c40b6b1520e77db445cb18"><div class="ttname"><a href="namespacemedial_1_1process.html#a7489521743c40b6b1520e77db445cb18">medial::process::down_sample</a></div><div class="ttdeci">void down_sample(MedFeatures &amp;dataMat, double take_ratio, bool with_repeats=false, vector&lt; int &gt; *selected_indexes=NULL)</div><div class="ttdoc">down sampling with ratio</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:885</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_a9f70ddf1f79f09e836578683cddfd9c2"><div class="ttname"><a href="namespacemedial_1_1process.html#a9f70ddf1f79f09e836578683cddfd9c2">medial::process::convert_prctile</a></div><div class="ttdeci">void convert_prctile(vector&lt; float &gt; &amp;features_prctiles)</div><div class="ttdoc">convert feature vector to it's prctil's value in each element</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:1836</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_ab30b0de1adfb8fa802f854a3ba37fb3a"><div class="ttname"><a href="namespacemedial_1_1process.html#ab30b0de1adfb8fa802f854a3ba37fb3a">medial::process::filter_row_indexes_safe</a></div><div class="ttdeci">void filter_row_indexes_safe(MedFeatures &amp;dataMat, const vector&lt; int &gt; &amp;selected_indexes, bool op_flag=false)</div><div class="ttdoc">filtering MedFeatures by selected indexes rows (thread safe for selected_indexes) no sort of selected...</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:807</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_ac0c3a29c06944b0a5502f3dd0198b787"><div class="ttname"><a href="namespacemedial_1_1process.html#ac0c3a29c06944b0a5502f3dd0198b787">medial::process::split_matrix</a></div><div class="ttdeci">void split_matrix(const MedFeatures &amp;matrix, vector&lt; int &gt; &amp;folds, int iFold, MedFeatures &amp;trainMatrix, MedFeatures &amp;testMatrix, const vector&lt; string &gt; *selected_features=NULL)</div><div class="ttdoc">split matrix to train test based on iFold value. folds is fold id for each sample</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:1752</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_ae514b7fd10f7277af01c0236faa387a7"><div class="ttname"><a href="namespacemedial_1_1process.html#ae514b7fd10f7277af01c0236faa387a7">medial::process::match_to_prior</a></div><div class="ttdeci">void match_to_prior(const vector&lt; float &gt; &amp;outcome, const vector&lt; float &gt; &amp;group_values, float target_prior, vector&lt; int &gt; &amp;sel_idx)</div><div class="ttdoc">does matching to specific target_prior.</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:1857</div></div>
<div class="ttc" id="anamespacemedial_1_1process_html_ae8cbb242d14958e377644ad1c97dc341"><div class="ttname"><a href="namespacemedial_1_1process.html#ae8cbb242d14958e377644ad1c97dc341">medial::process::reweight_by_general</a></div><div class="ttdeci">double reweight_by_general(MedFeatures &amp;data_records, const vector&lt; string &gt; &amp;groups, vector&lt; float &gt; &amp;weigths, bool print_verbose)</div><div class="ttdoc">reweighting method by given groups uniq values. return weights and min_factor</div><div class="ttdef"><b>Definition</b> MedFeatures.cpp:913</div></div>
<div class="ttc" id="anamespacemedial_html"><div class="ttname"><a href="namespacemedial.html">medial</a></div><div class="ttdoc">medial namespace for function</div><div class="ttdef"><b>Definition</b> InfraMed.h:667</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 10 2025 11:01:57 for Medial Code Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
