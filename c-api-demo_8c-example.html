<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Medial Code Documentation: c-api-demo.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Medial Code Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">c-api-demo.c</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stddef.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span> <span class="comment">/* uint32_t,uint64_t */</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="xgboost_2include_2xgboost_2c__api_8h.html">xgboost/c_api.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define safe_xgboost(call) {                                            \</span></div>
<div class="line"><span class="preprocessor">int err = (call);                                                       \</span></div>
<div class="line"><span class="preprocessor">if (err != 0) {                                                         \</span></div>
<div class="line"><span class="preprocessor">  fprintf(stderr, &quot;%s:%d: error in %s: %s\n&quot;, __FILE__, __LINE__, #call, XGBGetLastError()); \</span></div>
<div class="line"><span class="preprocessor">  exit(1);                                                              \</span></div>
<div class="line"><span class="preprocessor">}                                                                       \</span></div>
<div class="line"><span class="preprocessor">}</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Make Json encoded array interface. */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> MakeArrayInterface(<span class="keywordtype">size_t</span> data, <span class="keywordtype">size_t</span> n, <span class="keywordtype">char</span> <span class="keyword">const</span>* typestr, <span class="keywordtype">size_t</span> length,</div>
<div class="line">                               <span class="keywordtype">char</span>* out) {</div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keyword">const</span> kTemplate[] =</div>
<div class="line">      <span class="stringliteral">&quot;{\&quot;data\&quot;: [%lu, true], \&quot;shape\&quot;: [%lu, %lu], \&quot;typestr\&quot;: \&quot;%s\&quot;, \&quot;version\&quot;: 3}&quot;</span>;</div>
<div class="line">  memset(out, <span class="charliteral">&#39;\0&#39;</span>, length);</div>
<div class="line">  sprintf(out, kTemplate, data, n, 1ul, typestr);</div>
<div class="line">}</div>
<div class="line"><span class="comment">/* Make Json encoded DMatrix configuration. */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> MakeConfig(<span class="keywordtype">int</span> n_threads, <span class="keywordtype">size_t</span> length, <span class="keywordtype">char</span>* out) {</div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keyword">const</span> kTemplate[] = <span class="stringliteral">&quot;{\&quot;missing\&quot;: NaN, \&quot;nthread\&quot;: %d}&quot;</span>;</div>
<div class="line">  memset(out, <span class="charliteral">&#39;\0&#39;</span>, length);</div>
<div class="line">  sprintf(out, kTemplate, n_threads);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <span class="keywordtype">int</span> silent = 0;</div>
<div class="line">  <span class="keywordtype">int</span> use_gpu = 0;  <span class="comment">// set to 1 to use the GPU for training</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// load the data</span></div>
<div class="line">  <a class="code hl_typedef" href="group__Library.html#ga79787d32dbf589626a850cd9cd34dbe6">DMatrixHandle</a> dtrain, dtest;</div>
<div class="line">  safe_xgboost(<a id="a0" name="a0"></a><a class="code hl_function" href="group__DMatrix.html#ga357c3654a1a4dcc05e6b5c50acd17105">XGDMatrixCreateFromFile</a>(<span class="stringliteral">&quot;../../data/agaricus.txt.train?format=libsvm&quot;</span>, silent, &amp;dtrain));</div>
<div class="line">  safe_xgboost(<a class="code hl_function" href="group__DMatrix.html#ga357c3654a1a4dcc05e6b5c50acd17105">XGDMatrixCreateFromFile</a>(<span class="stringliteral">&quot;../../data/agaricus.txt.test?format=libsvm&quot;</span>, silent, &amp;dtest));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// create the booster</span></div>
<div class="line">  BoosterHandle booster;</div>
<div class="line">  <a class="code hl_typedef" href="group__Library.html#ga79787d32dbf589626a850cd9cd34dbe6">DMatrixHandle</a> eval_dmats[2] = {dtrain, dtest};</div>
<div class="line">  safe_xgboost(<a id="a1" name="a1"></a><a class="code hl_function" href="group__Booster.html#gad9fe6f8c8c4901db1c7581a96a21f9ae">XGBoosterCreate</a>(eval_dmats, 2, &amp;booster));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// configure the training</span></div>
<div class="line">  <span class="comment">// available parameters are described here:</span></div>
<div class="line">  <span class="comment">//   https://xgboost.readthedocs.io/en/latest/parameter.html</span></div>
<div class="line">  safe_xgboost(<a id="a2" name="a2"></a><a class="code hl_function" href="group__Booster.html#gaf7378865b0c999d2d08a5b16483b8bcb">XGBoosterSetParam</a>(booster, <span class="stringliteral">&quot;device&quot;</span>, use_gpu ? <span class="stringliteral">&quot;cuda&quot;</span> : <span class="stringliteral">&quot;cpu&quot;</span>));</div>
<div class="line"> </div>
<div class="line">  safe_xgboost(<a class="code hl_function" href="group__Booster.html#gaf7378865b0c999d2d08a5b16483b8bcb">XGBoosterSetParam</a>(booster, <span class="stringliteral">&quot;objective&quot;</span>, <span class="stringliteral">&quot;binary:logistic&quot;</span>));</div>
<div class="line">  safe_xgboost(<a class="code hl_function" href="group__Booster.html#gaf7378865b0c999d2d08a5b16483b8bcb">XGBoosterSetParam</a>(booster, <span class="stringliteral">&quot;min_child_weight&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">  safe_xgboost(<a class="code hl_function" href="group__Booster.html#gaf7378865b0c999d2d08a5b16483b8bcb">XGBoosterSetParam</a>(booster, <span class="stringliteral">&quot;gamma&quot;</span>, <span class="stringliteral">&quot;0.1&quot;</span>));</div>
<div class="line">  safe_xgboost(<a class="code hl_function" href="group__Booster.html#gaf7378865b0c999d2d08a5b16483b8bcb">XGBoosterSetParam</a>(booster, <span class="stringliteral">&quot;max_depth&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>));</div>
<div class="line">  safe_xgboost(<a class="code hl_function" href="group__Booster.html#gaf7378865b0c999d2d08a5b16483b8bcb">XGBoosterSetParam</a>(booster, <span class="stringliteral">&quot;verbosity&quot;</span>, silent ? <span class="stringliteral">&quot;0&quot;</span> : <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// train and evaluate for 10 iterations</span></div>
<div class="line">  <span class="keywordtype">int</span> n_trees = 10;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span>* eval_names[2] = {<span class="stringliteral">&quot;train&quot;</span>, <span class="stringliteral">&quot;test&quot;</span>};</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span>* eval_result = NULL;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n_trees; ++i) {</div>
<div class="line">    safe_xgboost(<a id="a3" name="a3"></a><a class="code hl_function" href="group__Booster.html#ga13594d68b27327db290ec5e0a0ac92ae">XGBoosterUpdateOneIter</a>(booster, i, dtrain));</div>
<div class="line">    safe_xgboost(<a id="a4" name="a4"></a><a class="code hl_function" href="group__Booster.html#ga201b53edb9cc52e9def1ccea951d18fe">XGBoosterEvalOneIter</a>(booster, i, eval_dmats, eval_names, 2, &amp;eval_result));</div>
<div class="line">    printf(<span class="stringliteral">&quot;%s\n&quot;</span>, eval_result);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  bst_ulong num_feature = 0;</div>
<div class="line">  safe_xgboost(<a id="a5" name="a5"></a><a class="code hl_function" href="group__Booster.html#gaa2c22f65cf2770c0e2e56cc7929a14af">XGBoosterGetNumFeature</a>(booster, &amp;num_feature));</div>
<div class="line">  printf(<span class="stringliteral">&quot;num_feature: %lu\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(num_feature));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// predict</span></div>
<div class="line">  bst_ulong out_len = 0;</div>
<div class="line">  <span class="keywordtype">int</span> n_print = 10;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Run prediction with DMatrix object. */</span></div>
<div class="line">  <span class="keywordtype">char</span> <span class="keyword">const</span> config[] =</div>
<div class="line">      <span class="stringliteral">&quot;{\&quot;training\&quot;: false, \&quot;type\&quot;: 0, &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;\&quot;iteration_begin\&quot;: 0, \&quot;iteration_end\&quot;: 0, \&quot;strict_shape\&quot;: false}&quot;</span>;</div>
<div class="line">  <span class="comment">/* Shape of output prediction */</span></div>
<div class="line">  uint64_t <span class="keyword">const</span>* out_shape;</div>
<div class="line">  <span class="comment">/* Dimension of output prediction */</span></div>
<div class="line">  uint64_t out_dim;</div>
<div class="line">  <span class="comment">/* Pointer to a thread local contigious array, assigned in prediction function. */</span></div>
<div class="line">  <span class="keywordtype">float</span> <span class="keyword">const</span>* out_result = NULL;</div>
<div class="line">  safe_xgboost(</div>
<div class="line">      <a id="a6" name="a6"></a><a class="code hl_function" href="group__Prediction.html#ga5870f34a54532b5dddf1070435202fef">XGBoosterPredictFromDMatrix</a>(booster, dtest, config, &amp;out_shape, &amp;out_dim, &amp;out_result));</div>
<div class="line"> </div>
<div class="line">  printf(<span class="stringliteral">&quot;y_pred: &quot;</span>);</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n_print; ++i) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;%1.4f &quot;</span>, out_result[i]);</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// print true labels</span></div>
<div class="line">  safe_xgboost(<a id="a7" name="a7"></a><a class="code hl_function" href="group__DMatrix.html#gab0ee317539a1fb1ce2b5f249e8c768f6">XGDMatrixGetFloatInfo</a>(dtest, <span class="stringliteral">&quot;label&quot;</span>, &amp;out_len, &amp;out_result));</div>
<div class="line">  printf(<span class="stringliteral">&quot;y_test: &quot;</span>);</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n_print; ++i) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;%1.4f &quot;</span>, out_result[i]);</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Dense Matrix Example (XGDMatrixCreateFromMat): &quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> values[] = {0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,</div>
<div class="line">      0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0,</div>
<div class="line">      1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,</div>
<div class="line">      0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0,</div>
<div class="line">      1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,</div>
<div class="line">      1, 0, 0, 0, 0, 1, 0, 0, 0, 0};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="group__Library.html#ga79787d32dbf589626a850cd9cd34dbe6">DMatrixHandle</a> dmat;</div>
<div class="line">    safe_xgboost(<a id="a8" name="a8"></a><a class="code hl_function" href="group__DMatrix.html#ga079f830cb972df70c7f50fb91678d62f">XGDMatrixCreateFromMat</a>(values, 1, 127, 0.0, &amp;dmat));</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span>* out_result = NULL;</div>
<div class="line"> </div>
<div class="line">    safe_xgboost(</div>
<div class="line">        <a class="code hl_function" href="group__Prediction.html#ga5870f34a54532b5dddf1070435202fef">XGBoosterPredictFromDMatrix</a>(booster, dmat, config, &amp;out_shape, &amp;out_dim, &amp;out_result));</div>
<div class="line">    assert(out_dim == 1);</div>
<div class="line">    assert(out_shape[0] == 1);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;%1.4f \n&quot;</span>, out_result[0]);</div>
<div class="line">    safe_xgboost(<a id="a9" name="a9"></a><a class="code hl_function" href="group__DMatrix.html#gaf06a15433b01e3b8297930a38155e05d">XGDMatrixFree</a>(dmat));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Sparse Matrix Example (XGDMatrixCreateFromCSR): &quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> uint64_t indptr[] = {0, 22};</div>
<div class="line">    <span class="keyword">const</span> uint32_t indices[] = {1,  9,  19, 21, 24, 34, 36, 39,  42,  53,  56,</div>
<div class="line">                                65, 69, 77, 86, 88, 92, 95, 102, 106, 117, 122};</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> data[] = {1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0,</div>
<div class="line">                          1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="group__Library.html#ga79787d32dbf589626a850cd9cd34dbe6">DMatrixHandle</a> dmat;</div>
<div class="line">    <span class="keywordtype">char</span> j_indptr[128];</div>
<div class="line">    MakeArrayInterface((<span class="keywordtype">size_t</span>)indptr, 2ul, <span class="stringliteral">&quot;&lt;u8&quot;</span>, <span class="keyword">sizeof</span>(j_indptr), j_indptr);</div>
<div class="line">    <span class="keywordtype">char</span> j_indices[128];</div>
<div class="line">    MakeArrayInterface((<span class="keywordtype">size_t</span>)indices, <span class="keyword">sizeof</span>(indices) / <span class="keyword">sizeof</span>(uint32_t), <span class="stringliteral">&quot;&lt;u4&quot;</span>,</div>
<div class="line">                       <span class="keyword">sizeof</span>(j_indices), j_indices);</div>
<div class="line">    <span class="keywordtype">char</span> j_data[128];</div>
<div class="line">    MakeArrayInterface((<span class="keywordtype">size_t</span>)data, <span class="keyword">sizeof</span>(data) / <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>), <span class="stringliteral">&quot;&lt;f4&quot;</span>, <span class="keyword">sizeof</span>(j_data), j_data);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">char</span> j_config[64];</div>
<div class="line">    MakeConfig(0, <span class="keyword">sizeof</span>(j_config), j_config);</div>
<div class="line"> </div>
<div class="line">    safe_xgboost(<a id="a10" name="a10"></a><a class="code hl_function" href="group__DMatrix.html#gae3f2e2852ae2cfc171d382c2e69611ac">XGDMatrixCreateFromCSR</a>(j_indptr, j_indices, j_data, 127, j_config, &amp;dmat));</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span>* out_result = NULL;</div>
<div class="line"> </div>
<div class="line">    safe_xgboost(</div>
<div class="line">        <a class="code hl_function" href="group__Prediction.html#ga5870f34a54532b5dddf1070435202fef">XGBoosterPredictFromDMatrix</a>(booster, dmat, config, &amp;out_shape, &amp;out_dim, &amp;out_result));</div>
<div class="line">    assert(out_dim == 1);</div>
<div class="line">    assert(out_shape[0] == 1);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;%1.4f \n&quot;</span>, out_result[0]);</div>
<div class="line">    safe_xgboost(<a class="code hl_function" href="group__DMatrix.html#gaf06a15433b01e3b8297930a38155e05d">XGDMatrixFree</a>(dmat));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Sparse Matrix Example (XGDMatrixCreateFromCSC): &quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> uint64_t indptr[] = {</div>
<div class="line">        0,  0,  1,  1,  1,  1,  1,  1,  1,  1,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  3,  3,</div>
<div class="line">        4,  4,  4,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  6,  6,  7,  7,  7,  8,  8,  8,  9,</div>
<div class="line">        9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11,</div>
<div class="line">        12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15,</div>
<div class="line">        15, 16, 16, 16, 16, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20,</div>
<div class="line">        20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22};</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> uint32_t indices[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> data[] = {1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0,</div>
<div class="line">                          1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">char</span> j_indptr[128];</div>
<div class="line">    MakeArrayInterface((<span class="keywordtype">size_t</span>)indptr, 128ul, <span class="stringliteral">&quot;&lt;u8&quot;</span>, <span class="keyword">sizeof</span>(j_indptr), j_indptr);</div>
<div class="line">    <span class="keywordtype">char</span> j_indices[128];</div>
<div class="line">    MakeArrayInterface((<span class="keywordtype">size_t</span>)indices, <span class="keyword">sizeof</span>(indices) / <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span>), <span class="stringliteral">&quot;&lt;u4&quot;</span>,</div>
<div class="line">                       <span class="keyword">sizeof</span>(j_indices), j_indices);</div>
<div class="line">    <span class="keywordtype">char</span> j_data[128];</div>
<div class="line">    MakeArrayInterface((<span class="keywordtype">size_t</span>)data, <span class="keyword">sizeof</span>(data) / <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>), <span class="stringliteral">&quot;&lt;f4&quot;</span>, <span class="keyword">sizeof</span>(j_data), j_data);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">char</span> j_config[64];</div>
<div class="line">    MakeConfig(0, <span class="keyword">sizeof</span>(j_config), j_config);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="group__Library.html#ga79787d32dbf589626a850cd9cd34dbe6">DMatrixHandle</a> dmat;</div>
<div class="line">    safe_xgboost(<a id="a11" name="a11"></a><a class="code hl_function" href="group__DMatrix.html#gae483d901c4ede359360d2ffeafc8cc4d">XGDMatrixCreateFromCSC</a>(j_indptr, j_indices, j_data, 1, j_config, &amp;dmat));</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span>* out_result = NULL;</div>
<div class="line"> </div>
<div class="line">    safe_xgboost(</div>
<div class="line">        <a class="code hl_function" href="group__Prediction.html#ga5870f34a54532b5dddf1070435202fef">XGBoosterPredictFromDMatrix</a>(booster, dmat, config, &amp;out_shape, &amp;out_dim, &amp;out_result));</div>
<div class="line">    assert(out_dim == 1);</div>
<div class="line">    assert(out_shape[0] == 1);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;%1.4f \n&quot;</span>, out_result[0]);</div>
<div class="line">    safe_xgboost(<a class="code hl_function" href="group__DMatrix.html#gaf06a15433b01e3b8297930a38155e05d">XGDMatrixFree</a>(dmat));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// free everything</span></div>
<div class="line">  safe_xgboost(<a id="a12" name="a12"></a><a class="code hl_function" href="group__Booster.html#ga5d816936b005a103f0deabf287a6a5da">XGBoosterFree</a>(booster));</div>
<div class="line">  safe_xgboost(<a class="code hl_function" href="group__DMatrix.html#gaf06a15433b01e3b8297930a38155e05d">XGDMatrixFree</a>(dtrain));</div>
<div class="line">  safe_xgboost(<a class="code hl_function" href="group__DMatrix.html#gaf06a15433b01e3b8297930a38155e05d">XGDMatrixFree</a>(dtest));</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Booster_html_ga13594d68b27327db290ec5e0a0ac92ae"><div class="ttname"><a href="group__Booster.html#ga13594d68b27327db290ec5e0a0ac92ae">XGBoosterUpdateOneIter</a></div><div class="ttdeci">XGB_DLL int XGBoosterUpdateOneIter(BoosterHandle handle, int iter, DMatrixHandle dtrain)</div><div class="ttdoc">update the model in one round using dtrain</div><div class="ttdef"><b>Definition</b> c_api.cc:960</div></div>
<div class="ttc" id="agroup__Booster_html_ga201b53edb9cc52e9def1ccea951d18fe"><div class="ttname"><a href="group__Booster.html#ga201b53edb9cc52e9def1ccea951d18fe">XGBoosterEvalOneIter</a></div><div class="ttdeci">XGB_DLL int XGBoosterEvalOneIter(BoosterHandle handle, int iter, DMatrixHandle dmats[], const char *evnames[], bst_ulong len, const char **out_result)</div><div class="ttdoc">get evaluation statistics for xgboost</div><div class="ttdef"><b>Definition</b> c_api.cc:998</div></div>
<div class="ttc" id="agroup__Booster_html_ga5d816936b005a103f0deabf287a6a5da"><div class="ttname"><a href="group__Booster.html#ga5d816936b005a103f0deabf287a6a5da">XGBoosterFree</a></div><div class="ttdeci">XGB_DLL int XGBoosterFree(BoosterHandle handle)</div><div class="ttdoc">free obj in handle</div><div class="ttdef"><b>Definition</b> c_api.cc:896</div></div>
<div class="ttc" id="agroup__Booster_html_gaa2c22f65cf2770c0e2e56cc7929a14af"><div class="ttname"><a href="group__Booster.html#gaa2c22f65cf2770c0e2e56cc7929a14af">XGBoosterGetNumFeature</a></div><div class="ttdeci">XGB_DLL int XGBoosterGetNumFeature(BoosterHandle handle, bst_ulong *out)</div><div class="ttdoc">get number of features</div><div class="ttdef"><b>Definition</b> c_api.cc:912</div></div>
<div class="ttc" id="agroup__Booster_html_gad9fe6f8c8c4901db1c7581a96a21f9ae"><div class="ttname"><a href="group__Booster.html#gad9fe6f8c8c4901db1c7581a96a21f9ae">XGBoosterCreate</a></div><div class="ttdeci">XGB_DLL int XGBoosterCreate(const DMatrixHandle dmats[], bst_ulong len, BoosterHandle *out)</div><div class="ttdoc">create xgboost learner</div><div class="ttdef"><b>Definition</b> c_api.cc:882</div></div>
<div class="ttc" id="agroup__Booster_html_gaf7378865b0c999d2d08a5b16483b8bcb"><div class="ttname"><a href="group__Booster.html#gaf7378865b0c999d2d08a5b16483b8bcb">XGBoosterSetParam</a></div><div class="ttdeci">XGB_DLL int XGBoosterSetParam(BoosterHandle handle, const char *name, const char *value)</div><div class="ttdoc">set parameters</div><div class="ttdef"><b>Definition</b> c_api.cc:903</div></div>
<div class="ttc" id="agroup__DMatrix_html_ga079f830cb972df70c7f50fb91678d62f"><div class="ttname"><a href="group__DMatrix.html#ga079f830cb972df70c7f50fb91678d62f">XGDMatrixCreateFromMat</a></div><div class="ttdeci">XGB_DLL int XGDMatrixCreateFromMat(const float *data, bst_ulong nrow, bst_ulong ncol, float missing, DMatrixHandle *out)</div><div class="ttdoc">create matrix content from dense matrix</div><div class="ttdef"><b>Definition</b> c_api.cc:499</div></div>
<div class="ttc" id="agroup__DMatrix_html_ga357c3654a1a4dcc05e6b5c50acd17105"><div class="ttname"><a href="group__DMatrix.html#ga357c3654a1a4dcc05e6b5c50acd17105">XGDMatrixCreateFromFile</a></div><div class="ttdeci">XGB_DLL int XGDMatrixCreateFromFile(const char *fname, int silent, DMatrixHandle *out)</div><div class="ttdoc">load a data matrix</div><div class="ttdef"><b>Definition</b> c_api.cc:233</div></div>
<div class="ttc" id="agroup__DMatrix_html_gab0ee317539a1fb1ce2b5f249e8c768f6"><div class="ttname"><a href="group__DMatrix.html#gab0ee317539a1fb1ce2b5f249e8c768f6">XGDMatrixGetFloatInfo</a></div><div class="ttdeci">XGB_DLL int XGDMatrixGetFloatInfo(const DMatrixHandle handle, const char *field, bst_ulong *out_len, const float **out_dptr)</div><div class="ttdoc">get float info vector from matrix.</div><div class="ttdef"><b>Definition</b> c_api.cc:692</div></div>
<div class="ttc" id="agroup__DMatrix_html_gae3f2e2852ae2cfc171d382c2e69611ac"><div class="ttname"><a href="group__DMatrix.html#gae3f2e2852ae2cfc171d382c2e69611ac">XGDMatrixCreateFromCSR</a></div><div class="ttdeci">XGB_DLL int XGDMatrixCreateFromCSR(char const *indptr, char const *indices, char const *data, bst_ulong ncol, char const *config, DMatrixHandle *out)</div><div class="ttdoc">Create a matrix from CSR matrix.</div><div class="ttdef"><b>Definition</b> c_api.cc:434</div></div>
<div class="ttc" id="agroup__DMatrix_html_gae483d901c4ede359360d2ffeafc8cc4d"><div class="ttname"><a href="group__DMatrix.html#gae483d901c4ede359360d2ffeafc8cc4d">XGDMatrixCreateFromCSC</a></div><div class="ttdeci">XGB_DLL int XGDMatrixCreateFromCSC(char const *indptr, char const *indices, char const *data, bst_ulong nrow, char const *config, DMatrixHandle *out)</div><div class="ttdoc">Create a matrix from a CSC matrix.</div><div class="ttdef"><b>Definition</b> c_api.cc:469</div></div>
<div class="ttc" id="agroup__DMatrix_html_gaf06a15433b01e3b8297930a38155e05d"><div class="ttname"><a href="group__DMatrix.html#gaf06a15433b01e3b8297930a38155e05d">XGDMatrixFree</a></div><div class="ttdeci">XGB_DLL int XGDMatrixFree(DMatrixHandle handle)</div><div class="ttdoc">free space in data matrix</div><div class="ttdef"><b>Definition</b> c_api.cc:585</div></div>
<div class="ttc" id="agroup__Library_html_ga79787d32dbf589626a850cd9cd34dbe6"><div class="ttname"><a href="group__Library.html#ga79787d32dbf589626a850cd9cd34dbe6">DMatrixHandle</a></div><div class="ttdeci">void * DMatrixHandle</div><div class="ttdoc">handle to DMatrix</div><div class="ttdef"><b>Definition</b> c_api.h:49</div></div>
<div class="ttc" id="agroup__Prediction_html_ga5870f34a54532b5dddf1070435202fef"><div class="ttname"><a href="group__Prediction.html#ga5870f34a54532b5dddf1070435202fef">XGBoosterPredictFromDMatrix</a></div><div class="ttdeci">XGB_DLL int XGBoosterPredictFromDMatrix(BoosterHandle handle, DMatrixHandle dmat, char const *config, bst_ulong const **out_shape, bst_ulong *out_dim, float const **out_result)</div><div class="ttdoc">Make prediction from DMatrix, replacing XGBoosterPredict.</div><div class="ttdef"><b>Definition</b> c_api.cc:1051</div></div>
<div class="ttc" id="axgboost_2include_2xgboost_2c__api_8h_html"><div class="ttname"><a href="xgboost_2include_2xgboost_2c__api_8h.html">c_api.h</a></div><div class="ttdoc">Copyright 2015~2023 by XGBoost Contributors.</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 24 2025 09:08:44 for Medial Code Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
