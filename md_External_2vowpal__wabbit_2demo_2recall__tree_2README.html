<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Medial Code Documentation: Recall tree demo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Medial Code Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Recall tree demo</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This demo exercises the recall tree reduction for logarithmic time multiclass classification.</p>
<p>The dataset used is <a href="http://aloi.science.uva.nl/">ALOI</a>, which only has 1000 classes in it. Due to constant factor overhead, I wouldn't recommend using recall tree unless you have at least 10,000 classes; but it's good to have a demo that runs quickly without a lot of memory.</p>
<p>The demo targets are:</p><ul>
<li><code>make defaults</code>: trains and tests using what are essentially the defaults for recall tree (see below). Eventually yields 11.2% test error.</li>
<li><code>make tuned</code>: trains and tests using hyperparameters found via random probe hyperparameter tuning. Eventually yields 9.9% test error.</li>
<li><code>make oaa</code>: trains and tests one-against-all using hyperparameters found via random probe hyperparameter tuning. Yields 12.1% test error (in less time than recall tree, it turns out).</li>
</ul>
<h2><a class="anchor" id="autotoc_md94"></a>
Recall Tree for your problem</h2>
<ul>
<li>As indicated, if you have less than 10000 classes, you should probably be using OAA. To accelerate training you can use negative gradient subsampling and multicore training via hogwild.</li>
<li>If you're still reading, you have more than 10000 classes. Therefore you will need many bits in your predictor. Use as many as you can afford computationally. <br  />
<ul>
<li>If your features are all binary then try disabling normalized updates via <code>--adaptive --invariant</code>, which is like having an extra bit in your predictor without the memory cost.</li>
</ul>
</li>
<li>Logistic loss (<code>--<a class="el" href="classloss__function.html">loss_function</a> logistic</code>) always works better, as far as I can tell.</li>
<li>There are extra features, consisting of the identities of the nodes in the routing tree, which are added to the example before passing to the underlying binary classifier.<ul>
<li>These are located in namespace '\x88'. So, for example, you can interact them with other namespaces as in this demo (see Makefile: this is what &lsquo;-q &rsquo;\x88':<code>is doing.)</code></li>
<li><code>For problems with lots of features, interacting with all the path features can be both a computational and statistical drag. Enabling the option</code>&ndash;node_only<code>only generates a single feature corresponding to the identity of the leaf node in the routing tree, which can be better under these conditions.</code></li>
</ul>
</li>
<li><code>Typically increasing the number of candidates per leaf</code>&ndash;max_candidates<code>from the default will improve accuracy at the cost of additional computation.</code></li>
<li><code>Computational overhead increases with deeper trees, but (test) accuracy does not necessarily increase. Therefore you have to play around with</code>&ndash;max_depth<code>and</code>&ndash;bern_hyper<code>.<ul>
<li>Increasing&ndash;bern_hyper<code>discourages deeper trees, decreasing it encourages deeper trees. &lt;br&gt; -</code>&ndash;max_depth<code>is a hard limit.</code></li>
</ul>
</code></li>
<li><code><code>Randomized routing</code>&ndash;randomized_routing` is a regularizer we came up with which sometimes works well. It's worth trying, but note that it will make your loss on the training set appear worse, so you'll need to assess on test data. </code></li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 7 2025 10:36:59 for Medial Code Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
